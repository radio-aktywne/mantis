services:
  emischeduler:
    build:
      context: ./
      network: host
    environment:
      - "EMISCHEDULER__SERVER__HOST=${EMISCHEDULER__SERVER__HOST:-0.0.0.0}"
      - "EMISCHEDULER__SERVER__PORT=${EMISCHEDULER__SERVER__PORT:-33000}"
      - "EMISCHEDULER__SERVER__TRUSTED=${EMISCHEDULER__SERVER__TRUSTED:-*}"
      - "EMISCHEDULER__STORE__PATH=${EMISCHEDULER__STORE__PATH:-data/state.json}"
      - "EMISCHEDULER__OPERATIONS__STREAM__TIMEOUT=${EMISCHEDULER__OPERATIONS__STREAM__TIMEOUT:-PT1H}"
      - "EMISCHEDULER__OPERATIONS__STREAM__WINDOW=${EMISCHEDULER__OPERATIONS__STREAM__WINDOW:-PT60D}"
      - "EMISCHEDULER__CLEANER__REFERENCE=${EMISCHEDULER__CLEANER__REFERENCE:-2000-01-01T00:00:00}"
      - "EMISCHEDULER__CLEANER__INTERVAL=${EMISCHEDULER__CLEANER__INTERVAL:-P1D}"
      - "EMISCHEDULER__SYNCHRONIZER__REFERENCE=${EMISCHEDULER__SYNCHRONIZER__REFERENCE:-2000-01-01T00:00:00}"
      - "EMISCHEDULER__SYNCHRONIZER__INTERVAL=${EMISCHEDULER__SYNCHRONIZER__INTERVAL:-PT1M}"
      - "EMISCHEDULER__SYNCHRONIZER__SYNCHRONIZERS__STREAM__WINDOW=${EMISCHEDULER__SYNCHRONIZER__SYNCHRONIZERS__STREAM__WINDOW:-P1D}"
      - "EMISCHEDULER__EMIRECORDS__HTTP__SCHEME=${EMISCHEDULER__EMIRECORDS__HTTP__SCHEME:-http}"
      - "EMISCHEDULER__EMIRECORDS__HTTP__HOST=${EMISCHEDULER__EMIRECORDS__HTTP__HOST:-localhost}"
      - "EMISCHEDULER__EMIRECORDS__HTTP__PORT=${EMISCHEDULER__EMIRECORDS__HTTP__PORT:-31000}"
      - "EMISCHEDULER__EMIRECORDS__HTTP__PATH=${EMISCHEDULER__EMIRECORDS__HTTP__PATH:-}"
      - "EMISCHEDULER__EMISHOWS__HTTP__SCHEME=${EMISCHEDULER__EMISHOWS__HTTP__SCHEME:-http}"
      - "EMISCHEDULER__EMISHOWS__HTTP__HOST=${EMISCHEDULER__EMISHOWS__HTTP__HOST:-localhost}"
      - "EMISCHEDULER__EMISHOWS__HTTP__PORT=${EMISCHEDULER__EMISHOWS__HTTP__PORT:-35000}"
      - "EMISCHEDULER__EMISHOWS__HTTP__PATH=${EMISCHEDULER__EMISHOWS__HTTP__PATH:-}"
      - "EMISCHEDULER__EMISTREAM__HTTP__SCHEME=${EMISCHEDULER__EMISTREAM__HTTP__SCHEME:-http}"
      - "EMISCHEDULER__EMISTREAM__HTTP__HOST=${EMISCHEDULER__EMISTREAM__HTTP__HOST:-localhost}"
      - "EMISCHEDULER__EMISTREAM__HTTP__PORT=${EMISCHEDULER__EMISTREAM__HTTP__PORT:-10000}"
      - "EMISCHEDULER__EMISTREAM__HTTP__PATH=${EMISCHEDULER__EMISTREAM__HTTP__PATH:-}"
      - "EMISCHEDULER__EMISTREAM__SRT__HOST=${EMISCHEDULER__EMISTREAM__SRT__HOST:-localhost}"
      - "EMISCHEDULER__EMISTREAM__SRT__PORT=${EMISCHEDULER__EMISTREAM__SRT__PORT:-10000}"
      - "EMISCHEDULER__DEBUG=${EMISCHEDULER__DEBUG:-false}"
    network_mode: host
    volumes:
      - data:/app/data/

volumes:
  data: {}
