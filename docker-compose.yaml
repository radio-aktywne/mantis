services:
  mantis:
    build:
      context: ./
      network: host
    environment:
      - "MANTIS__SERVER__HOST=${MANTIS__SERVER__HOST:-0.0.0.0}"
      - "MANTIS__SERVER__PORT=${MANTIS__SERVER__PORT:-33000}"
      - "MANTIS__SERVER__TRUSTED=${MANTIS__SERVER__TRUSTED:-*}"
      - "MANTIS__STORE__PATH=${MANTIS__STORE__PATH:-data/state.json}"
      - "MANTIS__OPERATIONS__STREAM__TIMEOUT=${MANTIS__OPERATIONS__STREAM__TIMEOUT:-PT1H}"
      - "MANTIS__OPERATIONS__STREAM__WINDOW=${MANTIS__OPERATIONS__STREAM__WINDOW:-P60D}"
      - "MANTIS__CLEANER__REFERENCE=${MANTIS__CLEANER__REFERENCE:-2000-01-01T00:00:00}"
      - "MANTIS__CLEANER__INTERVAL=${MANTIS__CLEANER__INTERVAL:-P1D}"
      - "MANTIS__SYNCHRONIZER__REFERENCE=${MANTIS__SYNCHRONIZER__REFERENCE:-2000-01-01T00:00:00}"
      - "MANTIS__SYNCHRONIZER__INTERVAL=${MANTIS__SYNCHRONIZER__INTERVAL:-PT1M}"
      - "MANTIS__SYNCHRONIZER__SYNCHRONIZERS__STREAM__WINDOW=${MANTIS__SYNCHRONIZER__SYNCHRONIZERS__STREAM__WINDOW:-P1D}"
      - "MANTIS__BEAVER__HTTP__SCHEME=${MANTIS__BEAVER__HTTP__SCHEME:-http}"
      - "MANTIS__BEAVER__HTTP__HOST=${MANTIS__BEAVER__HTTP__HOST:-localhost}"
      - "MANTIS__BEAVER__HTTP__PORT=${MANTIS__BEAVER__HTTP__PORT:-35000}"
      - "MANTIS__BEAVER__HTTP__PATH=${MANTIS__BEAVER__HTTP__PATH:-}"
      - "MANTIS__GECKO__HTTP__SCHEME=${MANTIS__GECKO__HTTP__SCHEME:-http}"
      - "MANTIS__GECKO__HTTP__HOST=${MANTIS__GECKO__HTTP__HOST:-localhost}"
      - "MANTIS__GECKO__HTTP__PORT=${MANTIS__GECKO__HTTP__PORT:-31000}"
      - "MANTIS__GECKO__HTTP__PATH=${MANTIS__GECKO__HTTP__PATH:-}"
      - "MANTIS__NUMBAT__HTTP__SCHEME=${MANTIS__NUMBAT__HTTP__SCHEME:-http}"
      - "MANTIS__NUMBAT__HTTP__HOST=${MANTIS__NUMBAT__HTTP__HOST:-localhost}"
      - "MANTIS__NUMBAT__HTTP__PORT=${MANTIS__NUMBAT__HTTP__PORT:-28000}"
      - "MANTIS__NUMBAT__HTTP__PATH=${MANTIS__NUMBAT__HTTP__PATH:-}"
      - "MANTIS__OCTOPUS__HTTP__SCHEME=${MANTIS__OCTOPUS__HTTP__SCHEME:-http}"
      - "MANTIS__OCTOPUS__HTTP__HOST=${MANTIS__OCTOPUS__HTTP__HOST:-localhost}"
      - "MANTIS__OCTOPUS__HTTP__PORT=${MANTIS__OCTOPUS__HTTP__PORT:-10000}"
      - "MANTIS__OCTOPUS__HTTP__PATH=${MANTIS__OCTOPUS__HTTP__PATH:-}"
      - "MANTIS__OCTOPUS__SRT__HOST=${MANTIS__OCTOPUS__SRT__HOST:-localhost}"
      - "MANTIS__OCTOPUS__SRT__PORT=${MANTIS__OCTOPUS__SRT__PORT:-10000}"
      - "MANTIS__DEBUG=${MANTIS__DEBUG:-false}"
    network_mode: host
    volumes:
      - data:/service/data/

volumes:
  data: {}
